<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>hexo-theme-doc-seed | Build a live video streaming </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <!-- fonts -->
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Ubuntu:300,400,500,600,700" rel="stylesheet">

    <!-- stylesheets -->
    <link rel="stylesheet" href="/style/doc.css">

    <!-- favicon -->
    <link rel="icon" href="/images/favicon.ico">

    

  <meta name="generator" content="Hexo 4.2.1"></head>
  <body>

   <script>window.__INITIAL_STATE__ = {"page":{"title":"Build a live video streaming","path":"getting_started/android.html"},"data":{"navigation":{"logo":{"text":"ZEGO Live","type":"link","path":"index.html"},"main":[{"text":"SAMPLE APP","type":"label"},{"text":"Android","type":"link","path":"sample_app/android.html"},{"text":"GETTING STARTED","type":"label"},{"text":"Android","type":"link","path":"getting_started/android.html"},{"text":"iOS","type":"link","path":"getting_started/ios.html"},{"text":"SUPPORT AND FEEDBACK","type":"label"},{"text":"Error codes","type":"link","path":"error_code.html"},{"text":"Contact us","type":"link","path":"https://github.bus.zalan.do/stargate/hexo-stargate-doc-theme-seed/issues/new"}]}},"config":{"timezone":"UTC","root":"/","time_format":"HH:mm:ss","theme":"../node_modules/hexo-theme-doc","theme_config":{"swagger_ui":{"version":2,"permalinks":true,"api_explorer":true,"download":"Download specification","show_extensions":false,"deep_linking":true,"display_operation_id":false,"doc_expansion":"none"},"search":{"skip":false,"background":false,"route":"/lunr.json"},"favicon":"images/favicon.ico"}}}</script>

    <div id="react-navigation-root"><div class="doc-navigation" data-reactroot=""><nav class="doc-navbar"><a href="/index.html" class="doc-navbar__logo"><img src="/images/logo.png" class="doc-navbar__logo__img"/><span class="doc-navbar__logo__text">ZEGO Live</span></a><i class="dc-icon dc-icon--close dc-icon--interactive doc-sidebar-close doc-navbar__sidebar-close doc-navbar__sidebar-close--desktop"></i><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-navbar__sidebar-toggle"></i></nav><nav class="doc-sidebar"><div class="doc-sidebar__vertical-menu"><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-sidebar-toggle--primary doc-sidebar__vertical-menu__item"></i><i class="dc-icon dc-icon--search dc-icon--interactive doc-sidebar__vertical-menu__item doc-sidebar__vertical-menu__item--primary"></i></div><div class="doc-sidebar-content"><div class="doc-sidebar__search-form"></div><ul class="doc-sidebar-list"></ul></div></nav></div></div>
    <div class="doc-content">
  <div class="dc-page">
    <div class="dc-card">
      <div id="react-search-results-root"></div>
      <div id="page-content" class="doc-formatting">
        <h1 id="Build-a-live-video-streaming"><a href="#Build-a-live-video-streaming" class="headerlink" title="Build a live video streaming"></a>Build a live video streaming</h1><hr>
<p>ZEGO Live provides you the capability to build an interactive live streaming application by encapsulating the Express-Video SDK, ZIM SDK, and ZegoEffects SDK. This document describes how to build a live video streaming with the ZEGO Live SDK.</p>
<p><br><br><br></p>
<hr>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Contact us to activate the ZEGO Live service, get the ZegoEffects SDK, and the resources and models that are required.</li>
<li>Create a project in <a href="https://console.zegocloud.com/" target="_blank" rel="noopener">ZEGO Admin Console</a>. For details, see <a href="https://docs.zegocloud.com/article/1271" target="_blank" rel="noopener">ZEGO Admin Console - Project management</a>.</li>
</ul>
<h2 id="Understand-the-process"><a href="#Understand-the-process" class="headerlink" title="Understand the process"></a>Understand the process</h2><p>The following diagram shows the basic process of creating a live room and a participant (user B) playing a stream published by the host (user A).</p>
<p><img src="../images/getting_started/android/quickstart.png" alt="quickstart.png"></p>
<h2 id="Integrate-the-ZEGOLive-SDK"><a href="#Integrate-the-ZEGOLive-SDK" class="headerlink" title="Integrate the ZEGOLive SDK"></a>Integrate the ZEGOLive SDK</h2><div class="mk-warning" style="background: #fafbfc;border: 1px solid #ff8830;border-radius: 4px;border-top-width: 4px;padding: 20px 20px 6px 20px;"><div style="color: #ff8830;">⚠️ Caution:</div>

<p>The Server APIs that we used to implement live room related business logic in the ZEGO Live sample app are only for experience and debugging purposes.</p>
<p>To build your own live streaming app, you can refer to ours to design your own business server APIs and replace them in our sample code. For more details about those Server APIs, see <a href="https://docs.zegocloud.com/article/13861" target="_blank" rel="noopener">Room related Server APIs</a>.</p>
<p></div></p>
<p>To integrate the SDK, do the following:</p>
<ol>
<li>Download the Sample codes, copy the <code>zegolive</code> module to your project.</li>
<li><p>Add the following code to the <code>settings.gradle</code> file:</p>
 <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="string">':zegolive'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Modify the <code>build.gradle</code> file of your application, add the following code to the <code>dependencies</code> node: </p>
 <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="keyword">project</span>(<span class="string">':zegolive'</span>)</span><br></pre></td></tr></table></figure>
<p> <img src="../images/getting_started/android/lib_app_config.png" alt="lib_app_config.png"></p>
</li>
<li><p>Modify the <code>build.gradle</code> file of your project, add the following code to the <code>repositories</code> node: </p>
 <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">maven &#123; url <span class="string">'https://www.jitpack.io'</span> &#125;</span><br></pre></td></tr></table></figure>
<p> <img src="../images/getting_started/android/jitpack.png" alt="jitpack.png"></p>
</li>
<li><p>Put the <strong>ZegoEffects SDK</strong> you get in the previous step into the <code>zegolive/libs</code> file, and put the <strong>resources</strong>, and <strong>models</strong> into the <code>zegolive/src/main/assets/effects</code> file.</p>
<p> <img src="../images/getting_started/android/effect_files.png" width=30%>    </p>
</li>
</ol>
<ol start="6">
<li>Click <code>sync now</code>.</li>
</ol>
<h2 id="Add-permissions"><a href="#Add-permissions" class="headerlink" title="Add permissions"></a>Add permissions</h2><p>Permissions can be set as needed.</p>
<p>Open the file <code>app/src/main/AndroidManifest.xml</code>, and add the following code:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Permissions required by the SDK --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.RECORD_AUDIO"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CAMERA"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.BLUETOOTH"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.MODIFY_AUDIO_SETTINGS"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Permissons required by the App --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WAKE_LOCK"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-feature</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:glEsVersion</span>=<span class="string">"0x00020000"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:required</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">"android.hardware.camera"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">"android.hardware.camera.autofocus"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note: For Android 6.0 or later, some important permissions must be requested at runtime rather than declared statically in the file <code>AndroidMainfest.xml</code>, therefore, you need to add the following code to do so (requestPermissions is a method of an Android Activity).</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">String[] permissionNeeded = &#123;</span><br><span class="line">        <span class="string">"android.permission.CAMERA"</span>,</span><br><span class="line">        <span class="string">"android.permission.RECORD_AUDIO"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123;</span><br><span class="line">    <span class="keyword">if</span> (ContextCompat.checkSelfPermission(<span class="keyword">this</span>, <span class="string">"android.permission.CAMERA"</span>) != PackageManager.PERMISSION_GRANTED ||</span><br><span class="line">        ContextCompat.checkSelfPermission(<span class="keyword">this</span>, <span class="string">"android.permission.RECORD_AUDIO"</span>) != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">        requestPermissions(permissionNeeded, <span class="number">101</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Initialize-the-ZEGOLive-SDK"><a href="#Initialize-the-ZEGOLive-SDK" class="headerlink" title="Initialize the ZEGOLive SDK"></a>Initialize the ZEGOLive SDK</h2><p>To initialize the ZEGOLive SDK, get the <code>RoomManager</code> instance, pass the AppID and AppSign of your project. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The AppID you get from ZEGOCLOUD Admin Console. </span></span><br><span class="line"><span class="keyword">long</span> appID = <span class="number">214124124L</span>;</span><br><span class="line"><span class="comment">// The AppSign you get from ZEGOCLOUD Admin Console. </span></span><br><span class="line">String appSign = <span class="string">"xxx"</span>;</span><br><span class="line"><span class="comment">// Initialize the SDK. We recommend you call this method when the application starts.</span></span><br><span class="line"><span class="comment">// The last parameter refers to the Application object of the ZEGOlive SDK.</span></span><br><span class="line">ZegoRoomManager.getInstance().init(appID, appSign, <span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>
<p>To receive event callbacks, call the <code>setListener</code> to listen for and handle various events as needed.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ZegoMessageService messageService = ZegoRoomManager.getInstance().messageService;</span><br><span class="line">messageService.setListener(<span class="keyword">new</span> ZegoMessageServiceListener() &#123;</span><br><span class="line">    <span class="comment">// Implement the callback handling logic as needed.</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ZegoUserService userService = ZegoRoomManager.getInstance().userService;</span><br><span class="line">userService.setListener(<span class="keyword">new</span> ZegoUserServiceListener() &#123;</span><br><span class="line">    <span class="comment">// Implement the callback handling logic as needed.        </span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ZegoRoomService roomService = ZegoRoomManager.getInstance().roomService;</span><br><span class="line">roomService.setListener(<span class="keyword">new</span> ZegoRoomServiceListener() &#123;</span><br><span class="line">    <span class="comment">// Implement the callback handling logic as needed. </span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Log-in"><a href="#Log-in" class="headerlink" title="Log in"></a>Log in</h2><p>To access the ZEGOLive service, you must log in first.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ZegoUserInfo user  = <span class="keyword">new</span> ZegoUserInfo();</span><br><span class="line"><span class="comment">// Set the user related properties. </span></span><br><span class="line">user.setUserID(<span class="string">"USER_ID"</span>);</span><br><span class="line">user.setUserName(<span class="string">"USER_NAME"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// The ZIM token. </span></span><br><span class="line">String token = <span class="string">"xxx"</span>;  </span><br><span class="line">ZegoRoomManager.getInstance().userService.login(user, token, <span class="keyword">new</span> ZegoRoomCallback() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRoomCallback</span><span class="params">(<span class="keyword">int</span> errorCode)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Callback for the login result. </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Start-the-local-video-preview"><a href="#Start-the-local-video-preview" class="headerlink" title="Start the local video preview"></a>Start the local video preview</h2><p>Before creating a live room to start live streaming, you can call the <code>playVideoStream</code> method to start the local video preview.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The [userID] can be used to specify which user's view you want to view. </span></span><br><span class="line"><span class="comment">// To preview your own local video view, pass in your userID.</span></span><br><span class="line"><span class="comment">// streamView view is a view for the local video preview.</span></span><br><span class="line">ZegoRoomManager.getInstance().deviceService.playVideoStream(userID, streamView);</span><br></pre></td></tr></table></figure>
<h2 id="Create-Join-a-live-room"><a href="#Create-Join-a-live-room" class="headerlink" title="Create/Join a live room"></a>Create/Join a live room</h2><ul>
<li>You become a <strong>Host</strong> after creating a room, and you can take a seat and start live streaming upon creating.</li>
<li>You become a <strong>Participants</strong> after joining a live room, and you can watch the live streaming and be a <a href="https://docs.zegocloud.com/article/13824" target="_blank" rel="noopener">co-host</a> to interact.</li>
</ul>
<div class="mk-warning" style="background: #fafbfc;border: 1px solid #ff8830;border-radius: 4px;border-top-width: 4px;padding: 20px 20px 6px 20px;"><div style="color: #ff8830;">⚠️ Caution:</div>

<ul>
<li>To prevent listeners in a room from being able to speak directly without taking a speaker seat, you will need to provide a token for the RTC SDK to validate whether you have the privileges to create or join a room. To obtain the token, see <a href="https://docs.zegocloud.com/article/11649" target="_blank" rel="noopener">RTC - Control user privileges</a>. </li>
</ul>
<p></div></p>
<p>To create a live room, call the <code>createRoom</code> method: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String roomID = <span class="string">"YOUR_ROOM_ID"</span>;</span><br><span class="line">String roomName = <span class="string">"YOUR_ROOM_NAME"</span>;</span><br><span class="line">String rtcToken = <span class="string">"xxx"</span>;  <span class="comment">// The RTC token. </span></span><br><span class="line">ZegoRoomManager.getInstance().roomService.createRoom(roomID, roomName, rtcToken, <span class="keyword">new</span> ZegoRoomCallback() &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRoomCallback</span><span class="params">(<span class="keyword">int</span> errorCode)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// Callback for the result of create a live room. </span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>After a live room is created, to start live streaming, the host will need to call the <code>takeSeat</code> method to speak. And the SDK automatically publishes the streams when the host takes a seat successfully.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ZegoRoomManager.getInstance().userService.takeSeat(<span class="keyword">new</span> ZegoRoomCallback()&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRoomCallback</span><span class="params">(<span class="keyword">int</span> errorCode)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// Callback for the returned result of take a seat.</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>To join a live room, call the <code>joinRoom</code> method. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String roomID = <span class="string">"ROOM_ID"</span>;</span><br><span class="line">String rtcToken = <span class="string">"xxx"</span>;  <span class="comment">// The RTC token. </span></span><br><span class="line">ZegoRoomManager.getInstance().roomService.joinRoom(roomID, rtcToken, <span class="keyword">new</span> ZegoRoomCallback() &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRoomCallback</span><span class="params">(<span class="keyword">int</span> errorCode)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// Callback for the result of join a live room. </span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>After joining a live room, for a participant to watch the live streaming, he will need to call the <code>playVideoStream</code> method to play the host’s published streams. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The [userID] can be used to specify which user's view you want to view. </span></span><br><span class="line"><span class="comment">// You can get the userID of the host in room info.</span></span><br><span class="line"><span class="comment">// streamView view is a view for the local video preview.</span></span><br><span class="line">ZegoRoomManager.getInstance().deviceService.playVideoStream(userID, streamView);</span><br></pre></td></tr></table></figure>
<h2 id="Send-Receive-text-chat-messages"><a href="#Send-Receive-text-chat-messages" class="headerlink" title="Send/Receive text chat messages"></a>Send/Receive text chat messages</h2><p>To send text chat messages in the room, call the <code>sendTextMessage</code> method.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ZegoRoomManager.getInstance().messageService.sendTextMessage(<span class="string">"YOUR_MESSAGE"</span>, <span class="keyword">new</span> ZegoRoomCallback() &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRoomCallback</span><span class="params">(<span class="keyword">int</span> errorCode)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// Callback for the result of send a message.</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>To receive the text chat messages, listen for the callback <code>onReceiveTextMessage</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ZegoRoomManager.getInstance().messageService.setListener(<span class="keyword">new</span> ZegoMessageServiceListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveTextMessage</span><span class="params">(ZegoTextMessage textMessage)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Receives and handle the messages (messages and sender ID).   </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Leave-a-live-room"><a href="#Leave-a-live-room" class="headerlink" title="Leave a live room"></a>Leave a live room</h2><p>Before the host leaves the live room, he will need to call the <code>leaveSeat</code> to leave the seat first. And the SDK automatically stops publishing streams when the host leaves the seat successfully.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ZegoRoomManager.getInstance().userService.leaveSeat(<span class="keyword">new</span> ZegoRoomCallback()&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRoomCallback</span><span class="params">(<span class="keyword">int</span> errorCode)</span></span>&#123;</span><br><span class="line">   <span class="comment">// Callback for the result of leave a seat.</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>To leave the live room, call the <code>leaveRoom</code> method. And the SDK stops all the stream publishing and playing operations simultaneously.    </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ZegoRoomManager.getInstance().roomService.leaveRoom(<span class="keyword">new</span> ZegoRoomCallback() &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRoomCallback</span><span class="params">(<span class="keyword">int</span> errorCode)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// Callback for the result of leave a live room. </span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Log-out"><a href="#Log-out" class="headerlink" title="Log out"></a>Log out</h2><p>To finish the ZEGOLive service, call the <code>logout</code> method.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZegoRoomManager.getInstance().userService.logout();</span><br></pre></td></tr></table></figure>
<h2 id="Deinitialize-the-ZEGOLive-SDK"><a href="#Deinitialize-the-ZEGOLive-SDK" class="headerlink" title="Deinitialize the ZEGOLive SDK"></a>Deinitialize the ZEGOLive SDK</h2><p>To deinitialize the SDK to make it uninitialized, call the <code>uninit</code> method. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZegoRoomManager.getInstance().unInit();</span><br></pre></td></tr></table></figure>
<h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><p><strong>Question</strong>: The error <code>Lambda expressions are not supported at language level &#39;7&#39;</code> occurs after importing the <code>zegolive</code> module. </p>
<p><strong>Answer</strong>: Lambda expressions are only supported in Java 8 or later. You will need to add the following code into the <code>build.gradle</code> file of your project first:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// Configure only for each module that uses Java 8</span></span><br><span class="line">    <span class="comment">// language features (either in its source code or</span></span><br><span class="line">    <span class="comment">// through dependencies).</span></span><br><span class="line">    compileOptions &#123;</span><br><span class="line">        <span class="keyword">sourceCompatibility</span> JavaVersion.VERSION_1_8</span><br><span class="line">        <span class="keyword">targetCompatibility</span> JavaVersion.VERSION_1_8</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        <div id="react-support-footer-root"></div>
      </div>
    </div>
  </div>
</div>

    


    

    <!-- js vendors -->
    <script src="//code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lunr.js/2.1.0/lunr.min.js"></script>

    <!-- js source  -->
    <script src="/script/doc.js"></script>

    

  </body>
</html>
